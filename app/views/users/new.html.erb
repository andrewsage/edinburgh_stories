<div class="container">
  <div class="col-xs-12">
    <h1 class="form-title">Sign Up</h1>

    <%= simple_form_for @user,
      wrapper: :horizontal_form,
      html: {class: 'form-horizontal', role: 'form'} do |form| %>

      <%= form.error_notification %>

      <div id="user_is_group" class="form-group">
        <div class="col-sm-4">
          <%= form.label :is_group %>
        </div>
        <div class="col-sm-8">
          <%= form.collection_radio_buttons :is_group, [[false, 'An individual'], [true, 'A group']], :first, :last %>
        </div>
      </div>

      <%= form.input :first_name, input_html: {class: 'form-control'} %>
      <%= form.input :last_name, input_html: {class: 'form-control'} %>

      <%= form.input :email, input_html: {class: 'form-control'} %>
      <%= form.input :screen_name, input_html: {class: 'form-control'} %>
      <%= form.input :password, required: true, input_html: {class: 'form-control'} %>
      <%= form.input :password_confirmation, required: true, input_html: {class: 'form-control'} %>

      <div class="form-group">
        <div class="actions col-xs-sm-12">
          <%= link_to "Cancel", root_path, class: "btn btn-default" %>
          <%= form.submit "Sign Up", class: "btn btn-primary" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  var initForm = function (e) {
    $('#user_is_group input[type="radio"]').on('change', function (e) {
      var label = $('label[for="user_first_name"]');
      if ($(e.currentTarget).val() === 'true') {
        label.html('<abbr title="required">*</abbr> Group name');
        $('.user_last_name').hide()
      } else {
        label.html('<abbr title="required">*</abbr> First name');
        $('.user_last_name').show()
      }
    })
  }

  $(document).ready(initForm);
  $(document).on('page:load', initForm);
</script>
